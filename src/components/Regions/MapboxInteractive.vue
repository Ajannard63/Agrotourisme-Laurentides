<!--***************************************************
Nom: Oli Boucher
Matricule: 2147514
***************************************************-->
<script>
  import mapboxgl from 'mapbox-gl';
  
  export default {
    mounted() {
      mapboxgl.accessToken =
        'pk.eyJ1Ijoib2xpYm9pIiwiYSI6ImNsaHphamM3NjE0ajIzdHA5OG5qdmxqejYifQ.1x1Fm3XphkOfkbrXPUx-yQ';
      const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/dark-v11',
        center: [285.7, 45.9],
        zoom: 8,
      });
      map.on('load', () => {
            map.addSource('laurentides', {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'geometry': {
                        'type': 'Polygon',
                        'coordinates': [
                            [
                                [-75.077168, 46.219002],
                                [-75.104637, 46.120575],
                                [-74.921846, 46.103258],
                                [-74.923095, 46.066876],
                                [-74.856171, 46.055437],
                                [-74.851677, 45.981023],
                                [-74.851677, 45.981023],
                                [-74.835945, 45.968871],
                                [-74.822710, 45.968351],
                                [-74.822710, 45.968351],
                                [-74.765525, 45.940218],
                                [-74.765525, 45.940218],
                                [-74.639919, 45.976857],
                                [-74.639919, 45.976857],
                                [-74.464121, 45.915373],
                                [-74.462872, 45.938133],
                                [-74.462872, 45.938133],
                                [-74.430909, 45.913635],
                                [-74.430909, 45.913635],
                                [-74.402442, 46.024053],
                                [-74.402442, 46.024053],
                                [-74.326029, 45.986577],
                                [-74.327028, 45.986751],
                                [-74.313544, 45.966788],
                                [-74.221399, 46.015554],
                                [-74.206167, 46.009482],
                                [-74.169209, 46.033245],
                                [-74.171207, 46.041741],
                                [-74.142739, 46.056130],
                                [-74.157972, 46.084204],
                                [-74.157472, 46.085070],
                                [-74.054590, 46.142732],
                                [-74.174453, 46.226087],
                                [-74.269344, 46.184426],
                                [-74.368730, 46.248893],
                                [-74.326029, 46.277041],
                                [-74.508570, 46.377429],
                                [-74.647411, 46.320703],
                                [-74.622439, 46.284292],
                                [-75.035923, 46.316631],
                                [-75.034616, 46.317258],
                                [-75.034616, 46.210192],
                            ]
                        ]
                    }
                }
            });

            map.addLayer({
                'id': 'laurentides',
                'type': 'fill',
                'source': 'laurentides', 
                'layout': {},
                'paint': {
                    'fill-color': '#fff675', 
                    'fill-opacity': 0.5
                }
            });

            map.addLayer({
                'id': 'outline1',
                'type': 'line',
                'source': 'laurentides',
                'layout': {},
                'paint': {
                    'line-color': '#fff675',
                    'line-width': 3
                }
            });
        });
        map.on('load', () => {
            map.addSource('peh', {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'geometry': {
                        'type': 'Polygon',
                        'coordinates': [
                            [
                                [-74.493013, 45.915279],
                                [-74.464204, 45.913858],
                                [-74.459801, 45.935955],
                                [-74.433489, 45.912989],
                                [-74.397622, 46.021358],
                                [-74.328951, 45.986310],
                                [-74.313469, 45.964263],
                                [-74.221574, 46.013552],
                                [-74.207590, 46.007480],
                                [-74.167137, 46.031937],
                                [-74.169134, 46.040954],
                                [-74.140667, 46.056903],
                                [-74.154651, 46.084284],
                                [-74.154651, 46.084284],
                                [-74.081056, 46.126859],
                                [-74.026298, 46.087229],
                                [-74.009567, 46.095717],
                                [-73.966617, 46.067476],
                                [-74.011565, 46.038526],
                                [-73.996332, 46.027081],
                                [-74.076241, 45.973118],
                                [-74.082983, 45.977805],
                                [-74.113698, 45.953498],
                                [-74.103709, 45.948982],
                                [-74.114447, 45.941514],
                                [-74.106456, 45.935955],
                                [-74.096717, 45.924488],
                                [-74.116195, 45.909022],
                                [-74.103210, 45.898941],
                                [-74.103210, 45.888336],
                                [-74.094470, 45.882946],
                                [-74.096717, 45.866947],
                                [-74.088976, 45.864511],
                                [-74.088727, 45.853030],
                                [-74.100962, 45.854596],
                                [-74.113948, 45.849203],
                                [-74.309473, 45.884163],
                                [-74.327952, 45.862076],
                                [-74.331448, 45.869729],
                                [-74.392628, 45.871990],
                                [-74.432968, 45.762301],
                                [-74.537848, 45.761604],
                                [-74.537848, 45.761604],
                                [-74.493013, 45.915279]
                            ]
                        ]
                    }
                }
            });

            map.addLayer({
                'id': 'peh',
                'type': 'fill',
                'source': 'peh', 
                'layout': {},
                'paint': {
                    'fill-color': '#ef6060',
                    'fill-opacity': 0.5
                }
            });

            map.addLayer({
                'id': 'outline2',
                'type': 'line',
                'source': 'peh',
                'layout': {},
                'paint': {
                    'line-color': '#ef6060',
                    'line-width': 3
                }
            });
        });
        map.on('load', () => {
            map.addSource('argenteuil', {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'geometry': {
                        'type': 'Polygon',
                        'coordinates': [
                            [
                                [-74.639919, 45.976857],
                                [-74.669803, 45.873391],
                                [-74.692319, 45.839217],
                                [-74.701838, 45.840875],
                                [-74.753828, 45.753436],
                                [-74.778631, 45.649037],
                                [-74.759226, 45.643021],
                                [-74.744032, 45.642381],
                                [-74.738357, 45.639693],
                                [-74.720601, 45.641997],
                                [-74.712546, 45.640973],
                                [-74.698084, 45.641997],
                                [-74.662570, 45.637516],
                                [-74.629619, 45.644301],
                                [-74.608750, 45.640973],
                                [-74.606188, 45.629835],
                                [-74.593190, 45.620360],
                                [-74.523261, 45.599483],
                                [-74.477679, 45.599099],
                                [-74.443996, 45.587312],
                                [-74.390176, 45.576549],
                                [-74.366927, 45.560271],
                                [-74.341116, 45.525392],
                                [-74.324274, 45.510126],
                                [-74.284916, 45.508458],
                                [-74.253612, 45.511409],
                                [-74.243178, 45.513205],
                                [-74.260020, 45.521031],
                                [-74.291323, 45.525649],
                                [-74.289675, 45.542449],
                                [-74.281621, 45.542962],
                                [-74.279058, 45.553604],
                                [-74.258921, 45.563860],
                                [-74.246839, 45.560014],
                                [-74.218099, 45.607297],
                                [-74.259837, 45.621384],
                                [-74.246839, 45.642765],
                                [-74.225055, 45.638285],
                                [-74.224140, 45.679745],
                                [-74.230730, 45.677954],
                                [-74.232377, 45.706474],
                                [-74.229998, 45.734595],
                                [-74.222675, 45.727949],
                                [-74.195399, 45.745328],
                                [-74.200159, 45.769854],
                                [-74.187372, 45.779655],
                                [-74.163757, 45.764330],
                                [-74.159821, 45.779144],
                                [-74.130348, 45.798422],
                                [-74.141881, 45.757624],
                                [-74.110395, 45.825285],
                                [-74.054744, 45.816034],
                                [-74.035157, 45.826305],
                                [-74.042021, 45.841677],
                                [-74.095292, 45.845886],
                                [-74.086414, 45.848181],
                                [-74.090075, 45.852071],
                                [-74.100509, 45.853665],
                                [-74.114605, 45.848628],
                                [-74.309522, 45.882713],
                                [-74.328377, 45.860659],
                                [-74.331306, 45.868500],
                                [-74.390526, 45.870795],
                                [-74.432021, 45.761492],
                                [-74.540942, 45.761684],
                                [-74.495072, 45.916775],
                            ]
                        ]
                    }
                }
            });

            map.addLayer({
                'id': 'argenteuil',
                'type': 'fill',
                'source': 'argenteuil',
                'layout': {},
                'paint': {
                    'fill-color': '#aad9ff',
                    'fill-opacity': 0.4
                }
            });

            map.addLayer({
                'id': 'outline3',
                'type': 'line',
                'source': 'argenteuil',
                'layout': {},
                'paint': {
                    'line-color': '#aad9ff',
                    'line-width': 3
                }
            });
        });
        map.on('load', () => {
            map.addSource('rivDuNord', {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'geometry': {
                        'type': 'Polygon',
                        'coordinates': [
                            [
                                [-74.140810, 45.756696],
                                [-74.109747, 45.823930],
                                [-74.054921, 45.814998],
                                [-74.034418, 45.825908],
                                [-74.040733, 45.842172],
                                [-74.089611, 45.845998],
                                [-74.085126, 45.848039],
                                [-74.088695, 45.852757],
                                [-74.087231, 45.865062],
                                [-74.096018, 45.866974],
                                [-74.093180, 45.882653],
                                [-74.101967, 45.889089],
                                [-74.102059, 45.899156],
                                [-74.114873, 45.908647],
                                [-74.095194, 45.924824],
                                [-74.105720, 45.933165],
                                [-74.105445, 45.936285],
                                [-74.113866, 45.941505],
                                [-74.103523, 45.949080],
                                [-74.112768, 45.954426],
                                [-74.084668, 45.977079],
                                [-74.075790, 45.971226],
                                [-73.995700, 46.026043],
                                [-73.941949, 45.996877],
                                [-73.945153, 45.980721],
                                [-73.924833, 45.964879],
                                [-73.921721, 45.936747],
                                [-73.797148, 45.861827],
                                [-73.863965, 45.852646],
                                [-73.843554, 45.844038],
                                [-73.965747, 45.780997],
                                [-73.993023, 45.790572],
                                [-74.020665, 45.781635],
                                [-73.997874, 45.766502],
                                [-74.025608, 45.756667],
                                [-74.071648, 45.779337],
                                [-74.140810, 45.756696],
                            ]
                        ]
                    }
                }
            });


            map.addLayer({
                'id': 'rivDuNord',
                'type': 'fill',
                'source': 'rivDuNord', 
                'layout': {},
                'paint': {
                    'fill-color': '#c5ff9f', 
                    'fill-opacity': 0.5
                }
            });

            map.addLayer({
                'id': 'outline4',
                'type': 'line',
                'source': 'rivDuNord',
                'layout': {},
                'paint': {
                    'line-color': '#c5ff9f',
                    'line-width': 3
                }
            });
        });
        map.on('load', () => {
            map.addSource('mirabel', {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'geometry': {
                        'type': 'Polygon',
                        'coordinates': [
                            [
                                [-74.246614, 45.558759],
                                [-74.214395, 45.607580],
                                [-74.257781, 45.622179],
                                [-74.244783, 45.641896],
                                [-74.222267, 45.637927],
                                [-74.222267, 45.680412],
                                [-74.230322, 45.679260],
                                [-74.231969, 45.707267],
                                [-74.231199, 45.732777],
                                [-74.223328, 45.726515],
                                [-74.192757, 45.744533],
                                [-74.197516, 45.768421],
                                [-74.187082, 45.777871],
                                [-74.164016, 45.762290],
                                [-74.158702, 45.776009],
                                [-74.132896, 45.797021],
                                [-74.143330, 45.753859],
                                [-74.071204, 45.777998],
                                [-74.025622, 45.755009],
                                [-73.996699, 45.766760],
                                [-74.017567, 45.781957],
                                [-73.993403, 45.788724],
                                [-73.965395, 45.780297],
                                [-73.861327, 45.715552],
                                [-73.887871, 45.706092],
                                [-73.892996, 45.708393],
                                [-73.915513, 45.694328],
                                [-73.859130, 45.673606],
                                [-73.870480, 45.667465],
                                [-73.846316, 45.651342],
                                [-73.847231, 45.645070],
                                [-73.851991, 45.646734],
                                [-73.860045, 45.640590],
                                [-73.884209, 45.651086],
                                [-73.886406, 45.655565],
                                [-73.907275, 45.639822],
                                [-73.912035, 45.620106],
                                [-73.989103, 45.606658],
                                [-73.983611, 45.585264],
                                [-74.001185, 45.575141],
                                [-74.006860, 45.581292],
                                [-74.045303, 45.568348],
                                [-74.072579, 45.548606],
                                [-74.056470, 45.536168],
                                [-74.061961, 45.532577],
                                [-74.080267, 45.541938],
                                [-74.110656, 45.518339],
                                [-74.128962, 45.528344],
                                [-74.111022, 45.539117],
                                [-74.139945, 45.555401],
                                [-74.147268, 45.553222],
                                [-74.188090, 45.574372],
                                [-74.246614, 45.558759],
                            ]
                        ]
                    }
                }
            });

         
            map.addLayer({
                'id': 'mirabel',
                'type': 'fill',
                'source': 'mirabel', 
                'layout': {},
                'paint': {
                    'fill-color': '#ecd583', 
                    'fill-opacity': 0.5
                }
            });

            map.addLayer({
                'id': 'outline5',
                'type': 'line',
                'source': 'mirabel',
                'layout': {},
                'paint': {
                    'line-color': '#ecd583',
                    'line-width': 3
                }
            });
        });
        map.on('load', () => {
            map.addSource('deuxmtng', {
                'type': 'geojson',
                'data': {
                    'type': 'Feature',
                    'geometry': {
                        'type': 'Polygon',
                        'coordinates': [
                            [
                                [-74.289029, 45.528370],
                                [-74.288114, 45.541259],
                                [-74.279601, 45.542349],
                                [-74.278503, 45.552991],
                                [-74.258824, 45.562862],
                                [-74.247200, 45.558696],
                                [-74.189284, 45.571812],
                                [-74.148164, 45.551966],
                                [-74.139743, 45.554530],
                                [-74.113748, 45.538566],
                                [-74.131780, 45.528178],
                                [-74.108897, 45.516953],
                                [-74.080431, 45.540554],
                                [-74.062491, 45.531064],
                                [-74.054803, 45.536450],
                                [-74.072102, 45.548504],
                                [-74.044826, 45.568246],
                                [-74.007482, 45.580036],
                                [-74.000983, 45.572988],
                                [-73.982951, 45.585354],
                                [-73.988169, 45.606108],
                                [-73.911649, 45.619299],
                                [-73.906066, 45.639784],
                                [-73.886387, 45.654951],
                                [-73.885655, 45.650152],
                                [-73.860850, 45.638888],
                                [-73.853253, 45.646696],
                                [-73.804284, 45.621028],
                                [-73.815634, 45.617314],
                                [-73.821217, 45.609502],
                                [-73.832384, 45.611807],
                                [-73.832384, 45.600600],
                                [-73.836503, 45.589134],
                                [-73.892153, 45.555235],
                                [-73.892428, 45.544914],
                                [-73.885289, 45.536450],
                                [-73.901306, 45.531961],
                                [-73.918880, 45.530550],
                                [-73.926111, 45.523239],
                                [-73.946156, 45.517274],
                                [-73.974165, 45.492894],
                                [-74.009861, 45.476592],
                                [-74.048304, 45.461955],
                                [-74.065603, 45.467027],
                                [-74.089676, 45.461441],
                                [-74.119332, 45.469081],
                                [-74.131128, 45.491033],
                                [-74.148793, 45.498028],
                                [-74.165543, 45.496937],
                                [-74.168289, 45.514580],
                                [-74.208471, 45.526895],
                                [-74.263298, 45.531897],
                                [-74.289029, 45.528370],
                            ]
                        ]
                    }
                }
            });

            map.addLayer({
                'id': 'deuxmtng',
                'type': 'fill',
                'source': 'deuxmtng',
                'layout': {},
                'paint': {
                    'fill-color': '#d6b0ff',
                    'fill-opacity': 0.5
                }
            });

            map.addLayer({
                'id': 'outline6',
                'type': 'line',
                'source': 'deuxmtng',
                'layout': {},
                'paint': {
                    'line-color': '#d6b0ff',
                    'line-width': 3
                }
            });
        });
        const dataMark = [{
                name: 'MRC des Laurentides',
                color: 'yellow',
                coord: [-74.587694, 46.127744],
                link: '/mrc/mrclaurentides'
            },
            {
                name: "MRC d'Argenteuil",
                color: 'blue',
                coord: [-74.464677, 45.702814],
                link: '/mrc/argenteuil'
            },
            {
                name: "MRC des Pays d'en Haut",
                color: 'red',
                coord: [-74.227430, 45.947775],
                link: '/mrc/paysDenHaut'
            },
            {
                name: "MRC de la Rivière du Nord",
                color: 'green',
                coord: [-74.009222, 45.878479],
                link: '/mrc/riviereDuNord'
            },
            {
                name: "MRC de Mirabel",
                color: 'orange',
                coord: [-74.083910, 45.658811],
                link: '/mrc/mirabel'
            },
            {
                name: "MRC de Deux-Montagnes",
                color: 'purple',
                coord: [-74.006293, 45.519411],
                link: '/mrc/deuxMontagnes'
            },
        ]

        dataMark.forEach(({
            name,
            coord,
            color,
            link
        }) => {
            const popupLaurentides = new mapboxgl.Popup({
                offset: 25
            })
            .setText(name)
            .setHTML(`<RouterLink to=${link}">${name}</a>`);

            const markLaurentides = new mapboxgl.Marker({
                    color: color
                })
                .setPopup(popupLaurentides)
                .setLngLat(coord)
                .addTo(map);
        });

    },
  };
  </script>

<template>
    <!-- [ Conteneur de la carte interactive  ] -->
    <div>
      <div id="map"></div>
    </div>
  </template>
  
  
  <style scoped>
  </style>
  